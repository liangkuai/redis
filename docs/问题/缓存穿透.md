# 缓存穿透


> **大量请求查询缓存和数据库中不存在的数据，导致所有请求绕过 Redis 直接落到数据库上。**


### 解决


#### 1. 非法参数校验

对明显非法的参数做校验，直接返回异常信息，例如：id < 0。

#### 2. 缓存无效 key

如果查询的是缓存和数据库都不存在的数据，就写一个 null 值的 key 到 Redis 中，并且设置过期时间。这种方式可以解决请求的 key 变化不频繁的情况。

但是有个缺点，如果大量请求每次都是不同的 key，就会导致 Redis 中缓存大量无效的 key。如果非要用这种方式来解决穿透问题的话，尽量将无效的 key 的过期时间设置短一点比如 30s。

#### 3. 布隆过滤器（Bloom Filter）

利用高效的数据结构和算法快速判断出 key 是否存在，不存在就直接返回异常信息，存在的话就查询数据库然后更新缓存。

#### 4. 限流

对于异常请求的用户、IP限流，或者黑名单
